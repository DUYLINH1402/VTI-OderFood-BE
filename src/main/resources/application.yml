# ===========================================
# Application Configuration - Base (Cấu hình chung)
# File này chứa các cấu hình dùng chung cho tất cả môi trường
# Profile mặc định: local
# ===========================================

server:
  port: 8081

spring:
  profiles:
    active: local  # Profile mặc định khi chạy ở local

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

# ===========================================
# JWT Configuration
# ===========================================
jwt:
  secret: ${JWT_SECRET}
  expiration: ${JWT_EXPIRATION:86400000}

# ===========================================
# AWS S3 Configuration
# ===========================================
aws:
  region: ${AWS_REGION:ap-southeast-1}
  access-key: ${AWS_ACCESS_KEY_ID}
  secret-key: ${AWS_SECRET_ACCESS_KEY}
  s3:
    bucket-name: foodorder-images

# ===========================================
# Brevo Email Configuration
# ===========================================
brevo:
  api-key: ${BREVO_API_KEY}
  sender-email: ${BREVO_SENDER_EMAIL}

# ===========================================
# App Configuration
# ===========================================
app:
  frontend:
    reset-password-url: ${RESET_PASSWORD_URL}

# ===========================================
# ZaloPay Configuration
# ===========================================
zalopay:
  app-id: ${ZALOPAY_APP_ID}
  key1: ${ZALOPAY_KEY1}
  key2: ${ZALOPAY_KEY2}
  endpoint: https://sb-openapi.zalopay.vn/v2/create
  callback-url: ${ZALOPAY_CALLBACK_URL}
  redirect-url: ${ZALOPAY_REDIRECT_URL}

# ===========================================
# OpenAI Configuration (Chatbot)
# ===========================================
openai:
  api-key: ${OPENAI_API_KEY}
  model: gpt-4o
  max-tokens: 1000
  temperature: 0.7

# ===========================================
# SpringDoc OpenAPI (Swagger)
# ===========================================
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui
    operations-sorter: method
    tags-sorter: alpha
    try-it-out-enabled: true
    filter: true
    display-request-duration: true
    disable-swagger-default-url: true
  show-actuator: false
  packages-to-scan: com.foodorder.backend
  paths-to-match: /api/**

# ===========================================
# Chatbot RAG Configuration
# ===========================================
chatbot:
  knowledge-base:
    update-interval: 3600000
  context:
    max-history: 20
    similarity-threshold: 0.7

# ===========================================
# Logging Configuration
# ===========================================
logging:
  level:
    com.foodorder.backend.coupons: DEBUG
    org.springframework.scheduling: INFO
